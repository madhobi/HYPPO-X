
<!--**************************************************************************************************
 Copyright Â© 2016-2017 Md.Kamruzzaman. All rights reserved.
 The generated code is released under following licenses:
 GNU GENERAL PUBLIC LICENSE, Version 3, 29 June 2007
 --------------------------------------------------------------------------------------------------
 File name: double_dap_sr_node.html
 Objective: Color nodes of the topological object constructed by double filter function DAP and Solar radiation
 Additional information: NA
 --------------------------------------------------------------------------------------------------
 Contributors                   Date            Task details
 -------------------------    ----------      --------------------
 Md. Kamruzzaman              02/27/2017      Initial version
 
 **************************************************************************************************-->

<html>
	<head>

	</head>
	<body>

		<script type="text/javascript">
			//Returns contents of a canvas as a png based data url, with the specified
			//background color
			function canvasToImage(_canvas, backgroundColor)
			{
			    //cache height and width        
			    var w = canvas.width;
			    var h = canvas.height;
			    var context = _canvas.getContext('2d');

			    var data;       

			    if(backgroundColor)
			    {
			        //get the current ImageData for the canvas.
			        data = context.getImageData(0, 0, w, h);

			        //store the current globalCompositeOperation
			        var compositeOperation = context.globalCompositeOperation;

			        //set to draw behind current content
			        context.globalCompositeOperation = "destination-over";

			        //set background color
			        context.fillStyle = backgroundColor;

			        //draw background / rect on entire canvas
			        context.fillRect(0,0,w,h);
			    }

			    //get the image data from the canvas
			    var imageData = _canvas.toDataURL("./png");

			    if(backgroundColor)
			    {
			        //clear the canvas
			        context.clearRect (0,0,w,h);

			        //restore it with original / cached ImageData
			        context.putImageData(data, 0,0);        

			        //reset the globalCompositeOperation to what it was
			        context.globalCompositeOperation = compositeOperation;
			    }

			    //return the Base64 encoded data url string
			    return imageData;
			}

			function drawText(_canvas, text, position, style){
				var context = _canvas.getContext('2d');

				context.font = style.font;//'bold 10pt Calibri';
				context.fillStyle = style.color;
  				context.fillText(text, (position.x1+position.x2)/2, (position.y1+position.y2)/2);
			}

			function drawPie(_canvas, position, data, _id, _adjust){
				var total = 0;
				  for (obj of data) {
				    total += obj.value;
				  }

				  var ctx = _canvas.getContext('2d');
				  var previousRadian;
				  var middle = {
				  	// for 3 paths
				    x: position.x,
				    y: 777-position.y,

				    // for all paths
				    //x: position.x+1,
				    //y: position.y-13,
				    radius: position.rad,
				  };
				  
				   //background
				  ctx.beginPath();
				  ctx.arc(middle.x, middle.y, middle.radius, 0, 2 * Math.PI);
				  ctx.closePath();
				  ctx.stroke();
				  ctx.fillStyle = "black";
				  ctx.fill();
				   //end of background

				  for (obj of data) {
				    previousRadian = previousRadian || 0;
				    obj.percentage = parseInt((obj.value / total) * 100)
				    
				    ctx.beginPath();
				    ctx.fillStyle = obj.color;
				    obj.radian = (Math.PI * 2) * (obj.value / total);
				    ctx.moveTo(middle.x, middle.y);
				    //middle.radius - 2 is to add border between the background and the pie chart
				    ctx.arc(middle.x, middle.y, middle.radius - 2, previousRadian, previousRadian + obj.radian, false);
				    ctx.closePath();
				    ctx.fill();
				    ctx.save();
				    ctx.translate(middle.x, middle.y);
				    ctx.fillStyle = "black";

				    // Adjust text color based on background color of a node
				    var c = obj.color;
				    if(c[5]=='f'&&c[6]=='f'){
				    	if(c[1]=='0'&&c[2]=='0'&&c[3]<='8')
				    		ctx.fillStyle = "yellow";
				    }

				    if(c[3]<='8'&&c[5]=='0'&&c[6]=='0'){
				    	if(c[1]=='f'&&c[2]=='f')
				    		ctx.fillStyle = "yellow";
				    }

				    //var adjust=; //for ph
				    //var adjust=6; //for temp
				    //var adjust=4; //for sr

				    ctx.font = (_adjust+(middle.radius / 2)) + "px arial bolder";
				    //ctx.rotate(previousRadian + obj.radian);
				    //\var labelText = "'" + obj.label + "' " + obj.percentage  + "%";
				    ctx.fillText(obj.label, -(ctx.measureText(obj.label).width / 2), 5);
				    //tx.fillText(_id);
				    ctx.restore();

				    previousRadian += obj.radian;
				  }

			}
		</script>

		<canvas id="myCanvas" width="1455" height="777"></canvas>
		<script type="text/javascript">
			var canvas = document.getElementById('myCanvas');
			
			var data=[{id:97,p:{x:1213.000000,y:654.000000,rad:22.50}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:70,p:{x:1316.000000,y:560.000000,rad:18.75}, d:[{label: "BK",value: 18,color: '#ff0000'}]},{id:87,p:{x:1130.000000,y:383.000000,rad:18.75}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:65,p:{x:914.000000,y:151.000000,rad:18.75}, d:[{label: "BK",value: 18,color: '#ff0000'}]},{id:69,p:{x:1331.000000,y:386.000000,rad:22.50}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:92,p:{x:1273.000000,y:614.000000,rad:26.25}, d:[{label: "BK",value: 6,color: '#ff0000'},{label: "BN",value: 20,color: '#E67E22'}]},{id:68,p:{x:1137.000000,y:175.000000,rad:18.75}, d:[{label: "BK",value: 18,color: '#ff0000'}]},{id:91,p:{x:1191.000000,y:565.000000,rad:30.00}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:67,p:{x:1054.000000,y:131.000000,rad:22.50}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:90,p:{x:1131.000000,y:487.000000,rad:30.00}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:39,p:{x:1250.000000,y:520.000000,rad:15.00}, d:[{label: "BK",value: 12,color: '#ff0000'}]},{id:38,p:{x:1311.000000,y:474.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:37,p:{x:1233.000000,y:427.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:36,p:{x:1255.000000,y:343.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:35,p:{x:1189.000000,y:271.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:34,p:{x:1071.000000,y:271.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:33,p:{x:991.000000,y:213.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:32,p:{x:968.000000,y:86.000000,rad:26.25}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:31,p:{x:873.000000,y:62.000000,rad:22.50}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:94,p:{x:948.473145,y:435.943451,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:47,p:{x:545.000000,y:112.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:71,p:{x:319.000000,y:206.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:83,p:{x:782.000000,y:667.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:60,p:{x:636.000000,y:709.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:84,p:{x:778.000000,y:591.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:93,p:{x:1018.000000,y:398.000000,rad:18.26}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:46,p:{x:459.000000,y:148.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:82,p:{x:860.000000,y:703.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:85,p:{x:806.000000,y:523.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:62,p:{x:941.000000,y:639.000000,rad:18.26}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:96,p:{x:807.000000,y:452.000000,rad:16.95}, d:[{label: "BN",value: 10,color: '#E67E22'}]},{id:49,p:{x:678.000000,y:210.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:73,p:{x:471.000000,y:59.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:26,p:{x:447.000000,y:579.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:81,p:{x:860.000000,y:634.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:58,p:{x:979.000000,y:574.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:80,p:{x:897.000000,y:572.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:79,p:{x:958.000000,y:508.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:78,p:{x:928.000000,y:376.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:77,p:{x:870.000000,y:232.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:30,p:{x:530.000000,y:736.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:76,p:{x:804.000000,y:189.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:29,p:{x:442.000000,y:747.000000,rad:22.17}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:75,p:{x:732.000000,y:146.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:28,p:{x:329.000000,y:717.000000,rad:22.17}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:74,p:{x:594.000000,y:173.000000,rad:18.26}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:27,p:{x:295.000000,y:575.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:72,p:{x:360.000000,y:152.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:25,p:{x:497.098328,y:530.899170,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:66,p:{x:710.000000,y:645.000000,rad:18.26}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:64,p:{x:774.000000,y:736.000000,rad:15.00}, d:[{label: "BN",value: 5,color: '#E67E22'}]},{id:57,p:{x:570.000000,y:644.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:56,p:{x:981.682190,y:329.872711,rad:18.26}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:55,p:{x:277.000000,y:670.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:54,p:{x:902.000000,y:300.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:53,p:{x:365.000000,y:644.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:52,p:{x:813.000000,y:306.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:51,p:{x:360.000000,y:531.000000,rad:18.26}, d:[{label: "BK",value: 18,color: '#ff0000'}]},{id:50,p:{x:746.000000,y:251.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:48,p:{x:650.000000,y:113.000000,rad:19.56}, d:[{label: "BN",value: 20,color: '#E67E22'}]},{id:45,p:{x:395.000000,y:91.000000,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:44,p:{x:272.000000,y:96.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:43,p:{x:225.906982,y:156.263062,rad:22.17}, d:[{label: "BN",value: 30,color: '#E67E22'}]},{id:42,p:{x:250.000000,y:232.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:41,p:{x:234.000000,y:526.000000,rad:20.86}, d:[{label: "BN",value: 25,color: '#E67E22'}]},{id:40,p:{x:157.000000,y:629.000000,rad:16.95}, d:[{label: "BK",value: 6,color: '#ff0000'},{label: "BN",value: 5,color: '#E67E22'}]},{id:24,p:{x:589.000000,y:498.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:23,p:{x:631.000000,y:439.000000,rad:22.17}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:22,p:{x:603.000000,y:58.000000,rad:18.26}, d:[{label: "BN",value: 15,color: '#E67E22'}]},{id:21,p:{x:548.000000,y:415.000000,rad:22.17}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:20,p:{x:594.000000,y:319.000000,rad:22.17}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:19,p:{x:507.000000,y:287.000000,rad:22.17}, d:[{label: "BK",value: 36,color: '#ff0000'}]},{id:18,p:{x:435.000000,y:321.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:17,p:{x:345.000000,y:278.000000,rad:24.78}, d:[{label: "BK",value: 30,color: '#ff0000'},{label: "BN",value: 15,color: '#E67E22'}]},{id:16,p:{x:268.000000,y:309.000000,rad:30.00}, d:[{label: "BK",value: 36,color: '#ff0000'},{label: "BN",value: 30,color: '#E67E22'}]},{id:15,p:{x:247.000000,y:444.000000,rad:27.39}, d:[{label: "BK",value: 24,color: '#ff0000'},{label: "BN",value: 30,color: '#E67E22'}]},{id:14,p:{x:181.000000,y:474.000000,rad:26.08}, d:[{label: "BK",value: 24,color: '#ff0000'},{label: "BN",value: 25,color: '#E67E22'}]},{id:13,p:{x:124.000000,y:534.000000,rad:27.39}, d:[{label: "BK",value: 30,color: '#ff0000'},{label: "BN",value: 25,color: '#E67E22'}]},{id:12,p:{x:39.000000,y:539.000000,rad:23.47}, d:[{label: "BK",value: 24,color: '#ff0000'},{label: "BN",value: 15,color: '#E67E22'}]},{id:10,p:{x:506.000000,y:625.000000,rad:16.95}, d:[{label: "BK",value: 12,color: '#ff0000'}]},{id:9,p:{x:570.000000,y:575.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:8,p:{x:648.000000,y:373.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:7,p:{x:496.000000,y:360.000000,rad:18.26}, d:[{label: "BK",value: 18,color: '#ff0000'}]},{id:6,p:{x:362.000000,y:351.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:5,p:{x:299.000000,y:388.000000,rad:22.17}, d:[{label: "BK",value: 30,color: '#ff0000'},{label: "BN",value: 5,color: '#E67E22'}]},{id:4,p:{x:200.000000,y:370.000000,rad:19.56}, d:[{label: "BK",value: 24,color: '#ff0000'}]},{id:3,p:{x:136.000000,y:402.000000,rad:20.86}, d:[{label: "BK",value: 30,color: '#ff0000'}]},{id:2,p:{x:80.000000,y:458.000000,rad:23.47}, d:[{label: "BK",value: 30,color: '#ff0000'},{label: "BN",value: 10,color: '#E67E22'}]},{id:1,p:{x:73.000000,y:612.000000,rad:20.86}, d:[{label: "BK",value: 18,color: '#ff0000'},{label: "BN",value: 10,color: '#E67E22'}]},{id:11,p:{x:428.000000,y:663.000000,rad:18.26}, d:[{label: "BK",value: 18,color: '#ff0000'}]}];


			var ph=[{id:97, d:{label: 'P',value: 0.18,color: '#0067ff'}},{id:70, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:87, d:{label: 'P',value: 1.83,color: '#ff0000'}},{id:65, d:{label: 'P',value: 0.00,color: '#0003ff'}},{id:69, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:92, d:{label: 'P',value: 0.14,color: '#0052ff'}},{id:68, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:91, d:{label: 'P',value: 0.52,color: '#00ffd7'}},{id:67, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:90, d:{label: 'P',value: 1.29,color: '#d4ff00'}},{id:39, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:38, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:37, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:36, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:35, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:34, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:33, d:{label: 'P',value: 0.00,color: '#0000ff'}},{id:32, d:{label: 'P',value: 0.02,color: '#000dff'}},{id:31, d:{label: 'P',value: 0.19,color: '#006fff'}},{id:94, d:{label: 'P',value: 1.40,color: '#0093ff'}},{id:47, d:{label: 'P',value: 0.21,color: '#0014ff'}},{id:71, d:{label: 'P',value: 0.07,color: '#0004ff'}},{id:83, d:{label: 'P',value: 5.37,color: '#3bff00'}},{id:60, d:{label: 'P',value: 9.61,color: '#ff0000'}},{id:84, d:{label: 'P',value: 6.57,color: '#baff00'}},{id:93, d:{label: 'P',value: 1.23,color: '#0081ff'}},{id:46, d:{label: 'P',value: 0.15,color: '#000dff'}},{id:82, d:{label: 'P',value: 4.33,color: '#00ff32'}},{id:85, d:{label: 'P',value: 6.62,color: '#c0ff00'}},{id:62, d:{label: 'P',value: 3.20,color: '#00ffab'}},{id:96, d:{label: 'P',value: 6.15,color: '#8eff00'}},{id:49, d:{label: 'P',value: 0.40,color: '#0028ff'}},{id:73, d:{label: 'P',value: 0.15,color: '#000dff'}},{id:26, d:{label: 'P',value: 2.90,color: '#00ffcb'}},{id:81, d:{label: 'P',value: 3.56,color: '#00ff85'}},{id:58, d:{label: 'P',value: 2.47,color: '#00fff8'}},{id:80, d:{label: 'P',value: 2.43,color: '#00fffd'}},{id:79, d:{label: 'P',value: 1.95,color: '#00cdff'}},{id:78, d:{label: 'P',value: 1.05,color: '#006dff'}},{id:77, d:{label: 'P',value: 0.62,color: '#003fff'}},{id:30, d:{label: 'P',value: 8.84,color: '#ff5200'}},{id:76, d:{label: 'P',value: 0.47,color: '#0030ff'}},{id:29, d:{label: 'P',value: 7.02,color: '#eaff00'}},{id:75, d:{label: 'P',value: 0.37,color: '#0025ff'}},{id:28, d:{label: 'P',value: 5.68,color: '#5cff00'}},{id:74, d:{label: 'P',value: 0.30,color: '#001dff'}},{id:27, d:{label: 'P',value: 3.59,color: '#00ff82'}},{id:72, d:{label: 'P',value: 0.09,color: '#0007ff'}},{id:25, d:{label: 'P',value: 2.26,color: '#00edff'}},{id:66, d:{label: 'P',value: 5.91,color: '#74ff00'}},{id:64, d:{label: 'P',value: 4.48,color: '#00ff23'}},{id:57, d:{label: 'P',value: 9.51,color: '#ff0900'}},{id:56, d:{label: 'P',value: 0.96,color: '#0064ff'}},{id:55, d:{label: 'P',value: 4.27,color: '#00ff39'}},{id:54, d:{label: 'P',value: 0.87,color: '#005aff'}},{id:53, d:{label: 'P',value: 3.45,color: '#00ff91'}},{id:52, d:{label: 'P',value: 0.62,color: '#003fff'}},{id:51, d:{label: 'P',value: 3.10,color: '#00ffb6'}},{id:50, d:{label: 'P',value: 0.48,color: '#0031ff'}},{id:48, d:{label: 'P',value: 0.26,color: '#0019ff'}},{id:45, d:{label: 'P',value: 0.12,color: '#000aff'}},{id:44, d:{label: 'P',value: 0.09,color: '#0007ff'}},{id:43, d:{label: 'P',value: 0.06,color: '#0004ff'}},{id:42, d:{label: 'P',value: 0.05,color: '#0003ff'}},{id:41, d:{label: 'P',value: 0.02,color: '#0000ff'}},{id:40, d:{label: 'P',value: 0.07,color: '#0005ff'}},{id:24, d:{label: 'P',value: 1.70,color: '#00b2ff'}},{id:23, d:{label: 'P',value: 1.38,color: '#0091ff'}},{id:22, d:{label: 'P',value: 0.22,color: '#0015ff'}},{id:21, d:{label: 'P',value: 1.04,color: '#006cff'}},{id:20, d:{label: 'P',value: 0.84,color: '#0057ff'}},{id:19, d:{label: 'P',value: 0.68,color: '#0046ff'}},{id:18, d:{label: 'P',value: 0.52,color: '#0035ff'}},{id:17, d:{label: 'P',value: 0.27,color: '#001aff'}},{id:16, d:{label: 'P',value: 0.19,color: '#0011ff'}},{id:15, d:{label: 'P',value: 0.12,color: '#000aff'}},{id:14, d:{label: 'P',value: 0.10,color: '#0008ff'}},{id:13, d:{label: 'P',value: 0.09,color: '#0007ff'}},{id:12, d:{label: 'P',value: 0.08,color: '#0006ff'}},{id:10, d:{label: 'P',value: 2.42,color: '#00fffe'}},{id:9, d:{label: 'P',value: 2.19,color: '#00e6ff'}},{id:8, d:{label: 'P',value: 1.08,color: '#0070ff'}},{id:7, d:{label: 'P',value: 0.88,color: '#005bff'}},{id:6, d:{label: 'P',value: 0.42,color: '#002aff'}},{id:5, d:{label: 'P',value: 0.28,color: '#001bff'}},{id:4, d:{label: 'P',value: 0.26,color: '#0019ff'}},{id:3, d:{label: 'P',value: 0.20,color: '#0012ff'}},{id:2, d:{label: 'P',value: 0.12,color: '#000bff'}},{id:1, d:{label: 'P',value: 0.08,color: '#0006ff'}},{id:11, d:{label: 'P',value: 5.46,color: '#44ff00'}}];



			var dap=[{id:97, d:{label: 'T',value: 98.50,color: '#ff0300'}},{id:70, d:{label: 'T',value: 98.00,color: '#ff1700'}},{id:87, d:{label: 'T',value: 91.00,color: '#d4ff00'}},{id:65, d:{label: 'T',value: 76.33,color: '#0095ff'}},{id:69, d:{label: 'T',value: 92.50,color: '#ffee00'}},{id:92, d:{label: 'T',value: 98.59,color: '#ff0000'}},{id:68, d:{label: 'T',value: 82.00,color: '#00ff8a'}},{id:91, d:{label: 'T',value: 95.50,color: '#ff7900'}},{id:67, d:{label: 'T',value: 80.00,color: '#00ffd8'}},{id:90, d:{label: 'T',value: 92.50,color: '#ffee00'}},{id:39, d:{label: 'T',value: 97.50,color: '#ff2a00'}},{id:38, d:{label: 'T',value: 95.50,color: '#ff7900'}},{id:37, d:{label: 'T',value: 92.50,color: '#ffee00'}},{id:36, d:{label: 'T',value: 89.50,color: '#9aff00'}},{id:35, d:{label: 'T',value: 85.50,color: '#00ff01'}},{id:34, d:{label: 'T',value: 82.50,color: '#00ff77'}},{id:33, d:{label: 'T',value: 79.50,color: '#00ffec'}},{id:32, d:{label: 'T',value: 75.59,color: '#0079ff'}},{id:31, d:{label: 'T',value: 72.50,color: '#0000ff'}},{id:94, d:{label: 'T',value: 58.50,color: '#baff00'}},{id:47, d:{label: 'T',value: 35.50,color: '#00ff64'}},{id:71, d:{label: 'T',value: 22.00,color: '#00f1ff'}},{id:83, d:{label: 'T',value: 75.50,color: '#ff7000'}},{id:60, d:{label: 'T',value: 64.50,color: '#fff900'}},{id:84, d:{label: 'T',value: 79.50,color: '#ff3e00'}},{id:93, d:{label: 'T',value: 57.00,color: '#a7ff00'}},{id:46, d:{label: 'T',value: 31.50,color: '#00ff96'}},{id:82, d:{label: 'T',value: 72.50,color: '#ff9500'}},{id:85, d:{label: 'T',value: 82.50,color: '#ff1800'}},{id:62, d:{label: 'T',value: 68.66,color: '#ffc500'}},{id:96, d:{label: 'T',value: 84.50,color: '#ff0000'}},{id:49, d:{label: 'T',value: 43.25,color: '#00ff03'}},{id:73, d:{label: 'T',value: 31.50,color: '#00ff96'}},{id:26, d:{label: 'T',value: 46.00,color: '#1eff00'}},{id:81, d:{label: 'T',value: 70.00,color: '#ffb400'}},{id:58, d:{label: 'T',value: 65.50,color: '#ffec00'}},{id:80, d:{label: 'T',value: 65.19,color: '#fff000'}},{id:79, d:{label: 'T',value: 62.50,color: '#ecff00'}},{id:78, d:{label: 'T',value: 55.00,color: '#8eff00'}},{id:77, d:{label: 'T',value: 48.50,color: '#3dff00'}},{id:30, d:{label: 'T',value: 62.00,color: '#e5ff00'}},{id:76, d:{label: 'T',value: 45.25,color: '#15ff00'}},{id:29, d:{label: 'T',value: 58.50,color: '#baff00'}},{id:75, d:{label: 'T',value: 42.25,color: '#00ff10'}},{id:28, d:{label: 'T',value: 55.50,color: '#94ff00'}},{id:74, d:{label: 'T',value: 39.66,color: '#00ff30'}},{id:27, d:{label: 'T',value: 49.00,color: '#43ff00'}},{id:72, d:{label: 'T',value: 25.00,color: '#00ffe7'}},{id:25, d:{label: 'T',value: 42.40,color: '#00ff0e'}},{id:66, d:{label: 'T',value: 77.00,color: '#ff5d00'}},{id:64, d:{label: 'T',value: 73.00,color: '#ff8f00'}},{id:57, d:{label: 'T',value: 63.50,color: '#f8ff00'}},{id:56, d:{label: 'T',value: 54.00,color: '#82ff00'}},{id:55, d:{label: 'T',value: 51.50,color: '#63ff00'}},{id:54, d:{label: 'T',value: 52.59,color: '#70ff00'}},{id:53, d:{label: 'T',value: 48.40,color: '#3cff00'}},{id:52, d:{label: 'T',value: 48.50,color: '#3dff00'}},{id:51, d:{label: 'T',value: 47.00,color: '#2aff00'}},{id:50, d:{label: 'T',value: 45.50,color: '#18ff00'}},{id:48, d:{label: 'T',value: 38.00,color: '#00ff45'}},{id:45, d:{label: 'T',value: 28.50,color: '#00ffbb'}},{id:44, d:{label: 'T',value: 25.60,color: '#00ffdf'}},{id:43, d:{label: 'T',value: 21.50,color: '#00ebff'}},{id:42, d:{label: 'T',value: 19.00,color: '#00ccff'}},{id:41, d:{label: 'T',value: 9.00,color: '#004fff'}},{id:40, d:{label: 'T',value: 3.00,color: '#0004ff'}},{id:24, d:{label: 'T',value: 38.40,color: '#00ff40'}},{id:23, d:{label: 'T',value: 35.50,color: '#00ff64'}},{id:22, d:{label: 'T',value: 36.00,color: '#00ff5e'}},{id:21, d:{label: 'T',value: 31.50,color: '#00ff96'}},{id:20, d:{label: 'T',value: 28.50,color: '#00ffbb'}},{id:19, d:{label: 'T',value: 25.50,color: '#00ffe0'}},{id:18, d:{label: 'T',value: 21.75,color: '#00eeff'}},{id:17, d:{label: 'T',value: 17.75,color: '#00bcff'}},{id:16, d:{label: 'T',value: 15.50,color: '#00a0ff'}},{id:15, d:{label: 'T',value: 11.50,color: '#006eff'}},{id:14, d:{label: 'T',value: 8.66,color: '#004bff'}},{id:13, d:{label: 'T',value: 5.30,color: '#0021ff'}},{id:12, d:{label: 'T',value: 2.71,color: '#0001ff'}},{id:10, d:{label: 'T',value: 43.50,color: '#00ff00'}},{id:9, d:{label: 'T',value: 42.00,color: '#00ff13'}},{id:8, d:{label: 'T',value: 32.00,color: '#00ff8f'}},{id:7, d:{label: 'T',value: 29.00,color: '#00ffb5'}},{id:6, d:{label: 'T',value: 18.79,color: '#00c9ff'}},{id:5, d:{label: 'T',value: 15.16,color: '#009cff'}},{id:4, d:{label: 'T',value: 11.75,color: '#0071ff'}},{id:3, d:{label: 'T',value: 8.20,color: '#0045ff'}},{id:2, d:{label: 'T',value: 5.57,color: '#0025ff'}},{id:1, d:{label: 'T',value: 2.60,color: '#0000ff'}},{id:11, d:{label: 'T',value: 55.00,color: '#8eff00'}}];



			var sr=[{id:97, d:{label: 'S',value: 35.51,color: '#ff0000'}},{id:70, d:{label: 'S',value: 26.95,color: '#00e5ff'}},{id:87, d:{label: 'S',value: 34.77,color: '#ff4400'}},{id:65, d:{label: 'S',value: 27.67,color: '#00ffd6'}},{id:69, d:{label: 'S',value: 27.04,color: '#00edff'}},{id:92, d:{label: 'S',value: 34.35,color: '#ff6b00'}},{id:68, d:{label: 'S',value: 27.24,color: '#00fffe'}},{id:91, d:{label: 'S',value: 34.26,color: '#ff7300'}},{id:67, d:{label: 'S',value: 27.52,color: '#00ffe4'}},{id:90, d:{label: 'S',value: 33.90,color: '#ff9500'}},{id:39, d:{label: 'S',value: 25.58,color: '#0066ff'}},{id:38, d:{label: 'S',value: 25.96,color: '#008aff'}},{id:37, d:{label: 'S',value: 26.26,color: '#00a5ff'}},{id:36, d:{label: 'S',value: 24.95,color: '#002cff'}},{id:35, d:{label: 'S',value: 24.60,color: '#000cff'}},{id:34, d:{label: 'S',value: 26.01,color: '#008eff'}},{id:33, d:{label: 'S',value: 26.26,color: '#00a5ff'}},{id:32, d:{label: 'S',value: 24.56,color: '#0008ff'}},{id:31, d:{label: 'S',value: 24.47,color: '#0000ff'}},{id:94, d:{label: 'S',value: 36.62,color: '#ff1900'}},{id:47, d:{label: 'S',value: 28.47,color: '#00ff0c'}},{id:71, d:{label: 'S',value: 31.60,color: '#b1ff00'}},{id:83, d:{label: 'S',value: 32.49,color: '#e8ff00'}},{id:60, d:{label: 'S',value: 29.00,color: '#12ff00'}},{id:84, d:{label: 'S',value: 32.08,color: '#ceff00'}},{id:93, d:{label: 'S',value: 37.05,color: '#ff0000'}},{id:46, d:{label: 'S',value: 30.57,color: '#73ff00'}},{id:82, d:{label: 'S',value: 33.16,color: '#ffed00'}},{id:85, d:{label: 'S',value: 33.69,color: '#ffcc00'}},{id:62, d:{label: 'S',value: 30.47,color: '#6cff00'}},{id:96, d:{label: 'S',value: 35.82,color: '#ff4b00'}},{id:49, d:{label: 'S',value: 30.54,color: '#71ff00'}},{id:73, d:{label: 'S',value: 30.57,color: '#73ff00'}},{id:26, d:{label: 'S',value: 25.02,color: '#00ffdf'}},{id:81, d:{label: 'S',value: 32.63,color: '#f0ff00'}},{id:58, d:{label: 'S',value: 30.87,color: '#85ff00'}},{id:80, d:{label: 'S',value: 32.54,color: '#ebff00'}},{id:79, d:{label: 'S',value: 34.12,color: '#ffb200'}},{id:78, d:{label: 'S',value: 32.86,color: '#feff00'}},{id:77, d:{label: 'S',value: 31.35,color: '#a2ff00'}},{id:30, d:{label: 'S',value: 25.74,color: '#00ffb3'}},{id:76, d:{label: 'S',value: 30.82,color: '#82ff00'}},{id:29, d:{label: 'S',value: 24.33,color: '#00f4ff'}},{id:75, d:{label: 'S',value: 31.58,color: '#b0ff00'}},{id:28, d:{label: 'S',value: 24.67,color: '#00fff4'}},{id:74, d:{label: 'S',value: 31.88,color: '#c2ff00'}},{id:27, d:{label: 'S',value: 27.18,color: '#00ff5c'}},{id:72, d:{label: 'S',value: 31.04,color: '#8fff00'}},{id:25, d:{label: 'S',value: 23.24,color: '#00b2ff'}},{id:66, d:{label: 'S',value: 31.44,color: '#a7ff00'}},{id:64, d:{label: 'S',value: 31.20,color: '#99ff00'}},{id:57, d:{label: 'S',value: 27.73,color: '#00ff3a'}},{id:56, d:{label: 'S',value: 30.73,color: '#7cff00'}},{id:55, d:{label: 'S',value: 27.64,color: '#00ff3f'}},{id:54, d:{label: 'S',value: 31.07,color: '#91ff00'}},{id:53, d:{label: 'S',value: 27.49,color: '#00ff48'}},{id:52, d:{label: 'S',value: 30.42,color: '#69ff00'}},{id:51, d:{label: 'S',value: 27.56,color: '#00ff44'}},{id:50, d:{label: 'S',value: 30.20,color: '#5cff00'}},{id:48, d:{label: 'S',value: 28.90,color: '#0cff00'}},{id:45, d:{label: 'S',value: 30.38,color: '#67ff00'}},{id:44, d:{label: 'S',value: 30.64,color: '#77ff00'}},{id:43, d:{label: 'S',value: 31.20,color: '#99ff00'}},{id:42, d:{label: 'S',value: 29.22,color: '#20ff00'}},{id:41, d:{label: 'S',value: 28.14,color: '#00ff21'}},{id:40, d:{label: 'S',value: 26.61,color: '#00ff7e'}},{id:24, d:{label: 'S',value: 24.17,color: '#00eaff'}},{id:23, d:{label: 'S',value: 24.21,color: '#00ecff'}},{id:22, d:{label: 'S',value: 26.62,color: '#00ff7e'}},{id:21, d:{label: 'S',value: 23.20,color: '#00afff'}},{id:20, d:{label: 'S',value: 24.10,color: '#00e6ff'}},{id:19, d:{label: 'S',value: 24.44,color: '#00fbff'}},{id:18, d:{label: 'S',value: 23.55,color: '#00c4ff'}},{id:17, d:{label: 'S',value: 24.30,color: '#00f2ff'}},{id:16, d:{label: 'S',value: 24.15,color: '#00e9ff'}},{id:15, d:{label: 'S',value: 25.26,color: '#00ffd0'}},{id:14, d:{label: 'S',value: 25.40,color: '#00ffc8'}},{id:13, d:{label: 'S',value: 24.00,color: '#00e0ff'}},{id:12, d:{label: 'S',value: 23.46,color: '#00bfff'}},{id:10, d:{label: 'S',value: 20.32,color: '#0000ff'}},{id:9, d:{label: 'S',value: 22.14,color: '#006fff'}},{id:8, d:{label: 'S',value: 22.59,color: '#008aff'}},{id:7, d:{label: 'S',value: 22.07,color: '#006aff'}},{id:6, d:{label: 'S',value: 22.13,color: '#006eff'}},{id:5, d:{label: 'S',value: 22.68,color: '#0090ff'}},{id:4, d:{label: 'S',value: 22.08,color: '#006bff'}},{id:3, d:{label: 'S',value: 21.52,color: '#0049ff'}},{id:2, d:{label: 'S',value: 21.90,color: '#0060ff'}},{id:1, d:{label: 'S',value: 22.19,color: '#0072ff'}},{id:11, d:{label: 'S',value: 22.65,color: '#008eff'}}];

				var background = new Image();
				background.src = "./dap_sr_B_6_sig_c.png";
				
				// Make sure the image is loaded first otherwise nothing will draw.
				background.onload = function(){
					var ctx = canvas.getContext('2d');
					ctx.drawImage(background,0,0,1440,783);

					// 0: Node color based on phenotype
					// 1: Node color based on solar radiation
					// 2: Node color based on DAP
					var index=0;

					for(k=0;k<data.length;k++){
					 	var position = data[k].p;

						var o1=ph, o2=sr, o3=dap;

					 	var d=[[{label:o1[k].d.value,value:1,color:o1[k].d.color}],[{label:o2[k].d.value,value:1,color:o2[k].d.color}],[{label:o3[k].d.value,value:1,color:o3[k].d.color}]];

					 	var adjust=[9,6,4];
					 	drawPie(canvas, position, d[index], data[k].id, adjust[index]);
					 }

					 // Save as png
					 window.location = canvas.toDataURL("image/png");
				}

		</script>
	</body>

</html>